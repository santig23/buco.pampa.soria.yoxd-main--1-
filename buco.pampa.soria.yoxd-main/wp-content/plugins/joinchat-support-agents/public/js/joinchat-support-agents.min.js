!function(j){"use strict";function t(){var n,i=joinchat_obj.settings.agents,t=!!joinchat_obj.settings.message_hash,e=!!joinchat_obj.$(".joinchat__channels").length,c=(a=new Date,o=a.getTimezoneOffset()+i.gtm_offset,new Date(a.getTime()+6e4*o)),s=c.getDay(),_='<div class="joinchat__agent__wrapper"><div class="joinchat__agent {{classes}}" {{data_agent}}> <div class="joinchat__agent__image" style="{{image}}"></div> <div class="joinchat__agent__info" {{data_info}}>  <div class="joinchat__agent__name">{{name}}</div>  <div class="joinchat__agent__role">{{role}}</div> </div> <div class="joinchat__agent__out">{{back}}</div></div></div>',h=j.extend({},i.list),a=["joinchat__agents","joinchat__contact"],l="",o=!0;return joinchat_obj.expand_agents=function(){var t=joinchat_obj.$(".joinchat__box__scroll");joinchat_obj.$(".joinchat__agents").removeClass("joinchat__agents--collapsed"),t.animate({scrollTop:n[0].offsetTop-t[0].offsetTop-10},200)},h=j.map(h,function(o){var e,a,t,n=o.days[s];return!0===n?o.online=!0:!1===n?o.online=!1:(o.online=!1,j.each(n.split(" "),function(t,n){var e=n.split("-"),a=e[0].split(":"),n=new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(a[0]),parseInt(a[1]),0),a="00:00"==e[1]?new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,0):(a=e[1].split(":"),new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(a[0]),parseInt(a[1]),0));n<=c&&c<a&&(o.online=!0)})),!o.online&&i.offline_show&&(e=6048e5,a=[],j.each(o.days,function(t,n){var e=t<s?t-s+7:t-s;!0===n?a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+e,0,0,0)):!1!==n&&j.each(n.split(" "),function(t,n){n=n.split("-")[0].split(":");a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+e,parseInt(n[0]),parseInt(n[1]),0))})}),j.each(a,function(t,n){c<n&&n-c<e&&(e=n-c)}),6048e5==e?o.back="···":864e5<e?(t=Math.ceil(e/864e5),o.back=i.i18n.d[1<e?1:0].replace("%s",t)):36e5<e?(t=Math.ceil(e/36e5),o.back=i.i18n.h[1<e?1:0].replace("%s",t)):6e4<e?(t=Math.ceil(e/6e4),o.back=i.i18n.m[1<e?1:0].replace("%s",t)):o.back=i.i18n.m[0].replace("%s",1)),o}),0==(h=!i.offline_show?j.grep(h,function(t){return t.online}):h).length?joinchat_obj.$div.addClass("joinchat--hidden"):t||1!=h.length||joinchat_obj.settings.chatbot||e?(i.random_order&&function(t){for(var n=t.length-1;0<n;n--){var e=Math.floor(Math.random()*(n+1)),a=t[n];t[n]=t[e],t[e]=a}}(h),o=t&&1<h.length,i.offline_show&&i.offline_contact&&a.push("joinchat__agents--offline-contact"),o&&a.push("joinchat__agents--collapsed"),j.each(h,function(t,n){var e=n.online?"joinchat__agent--online":"joinchat__agent--offline",a='data-id="'+t+'"',o="";0==t&&(a+=5<h.length?' data-count="+'+(h.length-5)+'"':"",o='data-start="'+joinchat_obj.$(".joinchat__button__sendtext").text()+'"'),l+=_.replace("{{data_agent}}",a).replace("{{data_info}}",o).replace("{{classes}}",e).replace("{{name}}",n.name).replace("{{role}}",n.role).replace("{{image}}",n.image?"background-image:url("+n.image+");":"").replace("{{back}}",n.back||"")}),n=j('<div class="'+a.join(" ")+'">'+l+"</div>"),joinchat_obj.$(".joinchat__box__content").append(n),n[0].style.setProperty("--agents",h.length),o&&j(document).on("joinchat:hide",function(){setTimeout(function(){n.addClass("joinchat__agents--collapsed")},500)}),n.on("click",".joinchat__agent",function(){var t=h[j(this).data("id")];n.hasClass("joinchat__agents--collapsed")?joinchat_obj.expand_agents():(t.online||i.offline_contact)&&(joinchat_obj.save_hash(),joinchat_obj.chatbox_hide(),joinchat_obj.open_whatsapp(t.phone,joinchat_obj.settings.message_send.replace("{AGENT}",t.name)))}),j(document).on("joinchat:can_contact",function(){e||(n.removeClass("joinchat--hidden"),setTimeout(joinchat_obj.expand_agents,10))})):i.offline_contact||h[0].online?(joinchat_obj.settings.telephone=h[0].phone,joinchat_obj.$(".joinchat__button").off("mouseenter mouseleave click").on("click",function(){joinchat_obj.save_hash(),joinchat_obj.open_whatsapp()}),joinchat_obj.chatbox=!0,j(document).on("joinchat:hide",function(){joinchat_obj.chatbox=!0})):joinchat_obj.$div.addClass("joinchat--hidden"),void j(document).trigger("joinchat:agents",[h])}j(document).on("joinchat:start",function(){joinchat_obj.settings&&joinchat_obj.settings.agents&&t()})}(jQuery,window);